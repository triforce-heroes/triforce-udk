import{BufferBuilder as e}from"@triforce-heroes/triforce-core/BufferBuilder";import{BufferConsumer as t}from"@triforce-heroes/triforce-core/BufferConsumer";import{GameObject as o}from"./types/GameObject.js";import{LanguageData as a}from"./types/LanguageData.js";import{LanguageDataItem as r}from"./types/LanguageDataItem/LanguageDataItem.js";import{Localization as s}from"./types/Localization.js";import{MonoScript as i}from"./types/MonoScript.js";export class LocalizationSystem{constructor(e){this.languages=new Map,this.languageDataItems=new Map;let f=new t(e);for(let e of(this.gameObject=o.from(f),this.monoScript=i.from(f),this.localization=s.from(f),this.localization.references))if(e!==-2n){let e=a.from(f);this.languages.set(e.languageId,e)}for(;!f.isConsumed();){let e=r.from(f);this.languageDataItems.set(e.reference,e)}for(let e of this.languages.values())e.fill(this.languageDataItems)}build(){let t=new e;for(let e of(t.push(this.gameObject.toBuffer()),t.push(this.monoScript.toBuffer()),t.push(this.localization.toBuffer()),this.languages.values()))t.push(e.toBuffer());for(let e of this.languageDataItems.values())t.push(e.toBuffer());return t.build()}}